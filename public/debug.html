<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>è°ƒè¯•é¡µé¢</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <script src="test-storage.js"></script>
  <script src="multi-device-sync.js"></script>
</head>
<body class="bg-gray-100 min-h-screen p-8">
  <div class="max-w-4xl mx-auto">
    <h1 class="text-3xl font-bold mb-8 text-center">è°ƒè¯•é¡µé¢</h1>
    
    <!-- æµ‹è¯•æŒ‰é’® -->
    <div class="bg-white rounded-lg shadow-md p-6 mb-6">
      <h2 class="text-xl font-semibold mb-4">æµ‹è¯•æŒ‰é’®</h2>
      <button id="test-btn" class="bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 transition-colors">
        æµ‹è¯•æŒ‰é’®ç‚¹å‡»
      </button>
    </div>
    
    <!-- çŠ¶æ€æ˜¾ç¤º -->
    <div class="bg-white rounded-lg shadow-md p-6 mb-6">
      <h2 class="text-xl font-semibold mb-4">ç³»ç»ŸçŠ¶æ€</h2>
      <div id="status-display" class="space-y-2 text-sm">
        <!-- çŠ¶æ€ä¿¡æ¯å°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
      </div>
    </div>
    
    <!-- æ§åˆ¶å°è¾“å‡º -->
    <div class="bg-white rounded-lg shadow-md p-6">
      <h2 class="text-xl font-semibold mb-4">æ§åˆ¶å°è¾“å‡º</h2>
      <div id="console-output" class="bg-gray-50 p-4 rounded-md max-h-64 overflow-y-auto text-sm font-mono">
        <!-- æ§åˆ¶å°è¾“å‡ºå°†åœ¨è¿™é‡Œæ˜¾ç¤º -->
      </div>
    </div>
  </div>

  <script>
    // æ¨¡æ‹Ÿæ§åˆ¶å°è¾“å‡º
    const originalConsoleLog = console.log;
    const originalConsoleError = console.error;
    const consoleOutput = document.getElementById('console-output');
    
    function addConsoleOutput(message, type = 'log') {
      const timestamp = new Date().toLocaleTimeString();
      const colorClass = type === 'error' ? 'text-red-600' : 'text-blue-600';
      consoleOutput.innerHTML += `<div class="${colorClass}">[${timestamp}] ${message}</div>`;
      consoleOutput.scrollTop = consoleOutput.scrollHeight;
    }
    
    console.log = function(...args) {
      originalConsoleLog.apply(console, args);
      addConsoleOutput(args.join(' '), 'log');
    };
    
    console.error = function(...args) {
      originalConsoleError.apply(console, args);
      addConsoleOutput(args.join(' '), 'error');
    };
    
    // æ›´æ–°çŠ¶æ€æ˜¾ç¤º
    function updateStatus() {
      const statusEl = document.getElementById('status-display');
      const testStorageStatus = window.testStorage ? 'âœ… å·²åŠ è½½' : 'âŒ æœªåŠ è½½';
      const multiDeviceSyncStatus = window.multiDeviceSync ? 'âœ… å·²åŠ è½½' : 'âŒ æœªåŠ è½½';
      
      statusEl.innerHTML = `
        <div class="flex justify-between">
          <span>testStorage:</span>
          <span class="${window.testStorage ? 'text-green-600' : 'text-red-600'}">${testStorageStatus}</span>
        </div>
        <div class="flex justify-between">
          <span>multiDeviceSync:</span>
          <span class="${window.multiDeviceSync ? 'text-green-600' : 'text-red-600'}">${multiDeviceSyncStatus}</span>
        </div>
        <div class="flex justify-between">
          <span>é¡µé¢åŠ è½½æ—¶é—´:</span>
          <span class="text-gray-600">${new Date().toLocaleString()}</span>
        </div>
      `;
    }
    
    // æµ‹è¯•æŒ‰é’®ç‚¹å‡»äº‹ä»¶
    document.getElementById('test-btn').addEventListener('click', () => {
      console.log('ğŸ”„ æµ‹è¯•æŒ‰é’®è¢«ç‚¹å‡»');
      
      if (window.testStorage) {
        console.log('âœ… testStorage å¯ç”¨');
        const status = testStorage.getStorageStatus();
        console.log('testStorage çŠ¶æ€:', status);
      } else {
        console.error('âŒ testStorage ä¸å¯ç”¨');
      }
      
      if (window.multiDeviceSync) {
        console.log('âœ… multiDeviceSync å¯ç”¨');
        const status = multiDeviceSync.getSyncStatus();
        console.log('multiDeviceSync çŠ¶æ€:', status);
      } else {
        console.error('âŒ multiDeviceSync ä¸å¯ç”¨');
      }
    });
    
    // é¡µé¢åŠ è½½å®Œæˆ
    document.addEventListener('DOMContentLoaded', () => {
      console.log('ğŸš€ è°ƒè¯•é¡µé¢å·²åŠ è½½');
      updateStatus();
      
      // å»¶è¿Ÿæ£€æŸ¥çŠ¶æ€
      setTimeout(() => {
        console.log('ğŸ”„ å»¶è¿Ÿæ£€æŸ¥ç³»ç»ŸçŠ¶æ€...');
        updateStatus();
      }, 1000);
    });
  </script>
</body>
</html> 